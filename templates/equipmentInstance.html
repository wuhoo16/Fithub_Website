{% extends 'base.html' %}

<!-- Equipment Object Param Name: equipmentObject -->
<!-- 2D List of Related Indices Param Name: relatedIndices -->

{% block head %}
    <title>{{ equipmentObject.name }}</title>
{% endblock %}


{% block body %}
<div class="exercise-instance-div container-fluid mx-auto">
  <div class="jumbotron-exercise-instance jumbotron jumbotron-fluid text-center">
    <h1>{{ equipmentObject.name }}</h1>
  </div>
      <!-- There's no rating returned by the API -->
<!--            <img id="equipmentInstanceRating" class="img-fluid w-50 h-auto" src="{{ url_for('static', filename='{{ equipmentObject.rating }}stars.png') }}" alt="Rating: {{ equipmentObject.rating }}/5 stars">-->
    <!-- Image -->
  {% if equipmentObject.replacePictureFlag %}-->
      <center><img class="card-img-top img-fluid mx-auto" style="width: auto; min-height: 300px; max-height: 400px; background-color: whitesmoke;" src="/../static/{{ equipmentObject.picture }}" alt="{{ equipmentObject.name }}'s image"></center>
  {% else %}
      <center><img class="card-img-top img-fluid mx-auto" style="width: auto; min-height: 300px; max-height: 400px; background-color: whitesmoke;" src="{{ equipmentObject.picture }}" onerror="this.onerror=null; this.src='{{ equipmentObject.picture }}'"; alt="{{ equipmentObject.name }}'s image"></center>
  {% endif %}
  <br>
  <!-- Information -->
<!--        <div id="equipmentInstanceDescriptionRow" class="row justify-content-center align-items-center">-->
<!--            <p></p>-->
<!--        </div>-->

  <div class="exercise-instance-text container-fluid text-center">
    <div class="jumbotron-exercise-instance-text jumbotron jumbotron-fluid text-center">
      <h4 id="priceText"><b><u>Price:</u> </b>{{ equipmentObject.price }} USD</h4>
    </div>
    <div class="jumbotron-exercise-instance-text jumbotron jumbotron-fluid text-center">
      <div class="row">
        <div class="col-sm-6">
          <h4 class="sellerLocationText"><b><u>Seller Location:</u> </b>{{ equipmentObject.location }}</h4>
        </div>
        <div class="col-sm-6">
          <h4 class="categoryText"><b><u>Category:</u> </b>{{ equipmentObject.category }}</h4>
        </div>
      </div>
    </div>
    <h4><b><a href="{{ equipmentObject.linkToItem }}">View item on eBay</a></b></h4>
  </div>
  
  <hr><hr>

  <div class="tables">
    <!-- Related exercises, equipment, and channel instances -->
    <!-- Related exercises table -->
    <h4 class="instance-text">Related Exercise Pages: </h4>
    <table class="table table-striped table-hover table-sm">
      <caption>Exercise pages are related by category {{ equipmentObject.equipmentCategory }}</caption>
      <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Exercise Name</th>
          <th scope="col">Page URL</th>
        </tr>
      </thead>
      <tbody>
      {% for obj in relatedObjects[0] %}
        <tr class="table-secondary">
            <th scope="row">{{ loop.index }}</th>
            <th scope="row">{{ obj.name }}</th>
            <td><a href="{{ url_for('exercise_instance', arrayIndex=obj.arrayIndex) }}">Link</a></td>
        </tr>
      {% endfor %}
    </table>

    <!-- Related equipment table -->
    <h4 class="instance-text">Related Equipment Pages: </h4>
    <table class="table table-striped table-hover table-sm">
      <caption>Equipment pages are related by category {{ equipmentObject.equipmentCategory }}</caption>
      <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Equipment Name</th>
          <th scope="col">Page URL</th>
        </tr>
      </thead>
      <tbody>
      {% for obj in relatedObjects[1] %}
        <tr class="table-secondary">
            <th scope="row">{{ loop.index }}</th>
            <th scope="row">{{ obj.name }}</th>
            <td><a href="{{ url_for('equipment_instance', arrayIndex=obj.arrayIndex) }}">Link</a></td>
        </tr>
      {% endfor %}
      {% if relatedObjects[1]|length == 0 %}
        <tr class="table-secondary">
            <th scope="row">0</th>
            <th scope="row">Sorry! Looks like this exercise has no related equipment. This could be a bodyweight or calisthenics exercise!</th>
            <td>NA</td>
        </tr>
      {% endif %}

    </table>

    <!-- Related channels table -->
    <h4 class="instance-text">Related Channel Pages: </h4>
    <table class="table table-striped table-hover table-sm">
      <caption>Channel pages are related by category {{ equipmentObject.equipmentCategory }}</caption>
      <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Channel Name</th>
          <th scope="col">Page URL</th>
        </tr>
      </thead>
      <tbody>
      {% for obj in relatedObjects[2] %}
        <tr class="table-secondary">
            <th scope="row">{{ loop.index }}</th>
            <th scope="row">{{ obj.name }}</th>
            <td><a href="{{ url_for('channel_instance', arrayIndex=obj.arrayIndex) }}">Link</a></td>
        </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endblock %}